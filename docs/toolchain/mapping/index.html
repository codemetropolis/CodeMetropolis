
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../interXMLformat/">
      
      
        <link rel="next" href="../placing/">
      
      
      <link rel="icon" href="../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.6">
    
    
      
        <title>Mapping Tool - CodeMetropolis</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.50c56a3b.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CodeMetropolis" class="md-header__button md-logo" aria-label="CodeMetropolis" data-md-component="logo">
      
  <img src="../../images/site-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CodeMetropolis
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Mapping Tool
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CodeMetropolis" class="md-nav__button md-logo" aria-label="CodeMetropolis" data-md-component="logo">
      
  <img src="../../images/site-logo.png" alt="logo">

    </a>
    CodeMetropolis
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    In a nutshell
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About the CodeMetropolis project
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Toolchain
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Toolchain
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../converter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CDF Converter Tool
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../interXMLformat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inter tool XML format
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Mapping Tool
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../placing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Placing Tool
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rendering/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rendering Tool
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../custom/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom CDF Converter Tutorial
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../research/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Research
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../wall-of-fame/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wall of Fame
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contact/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contact us
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Mapping Tool</h1>

<p>This application is used to process the XML file generated by the CDF Converter Tool, assigns metrics to objects of the metropolis and generates an output XML that is ready to be used by CodeMetropolis Placing Tool. The tool is using the mapping file to link source code elements and metrics to world objects. For example, link of the LOC metric is related to the height of the building. The <em>source</em> tag contains the metric that will be a link to the object, the <em>name</em> parameter is the element of the source code and the <em>from</em> parameter is the metric. The <em>target</em> parameter is the world object, the <em>name</em> parameter is the name of the element in the city and the <em>to</em> parameter is the property of the element. If the value of the metric doesn't fit the world element, you have to use conversion.</p>
<p><strong>Usage</strong>: <code>java -jar mapping.jar -i &lt;inputFile&gt; -m &lt;mappingFile&gt; [-o &lt;outputFile&gt;]</code></p>
<p><strong>Command line options:</strong></p>
<ul>
<li><code>-h</code>: help, shows the usage of the command line tool.</li>
<li><code>-i</code>: input, the path of the input XML file generated by the Converter Tool. Required.</li>
<li><code>-o</code>: output, which will be generated to the given path. Default: "mappingToPlacing.xml".</li>
<li><code>-m</code>: mapping, path of the input mapping file. Required.</li>
<li><code>-s</code>: scale. Set the scale of blocks. Default: 1.0</li>
<li><code>-v</code>: validate. Default: false. In case of true, the tool will validate the generated structure elements, if it's false, the invalid structure elements will be thrown.</li>
</ul>
<p><strong>About the mapping file</strong></p>
<p>Mapping tool uses an XML file to determine the bindings from source elements to buildings of the world.
Editing this file allows you to use the city metaphors the way you want. Mapping XMLs must follow a specific format.</p>
<pre><code class="language-xml">&lt;linking source=&quot;method&quot; target=&quot;floor&quot;&gt;
    &lt;binding from=&quot;LLOC&quot; to=&quot;height&quot;/&gt;
    &lt;binding from=&quot;NII&quot; to=&quot;width&quot;/&gt;
    &lt;binding from=&quot;NOI&quot; to=&quot;length&quot;/&gt;
    &lt;binding from=&quot;McCC&quot; to=&quot;character&quot;&gt;
        &lt;conversions&gt;
            &lt;conversion type=&quot;quantization&quot;&gt;
                &lt;parameter name=&quot;level0&quot; value=&quot;glass&quot;/&gt;
                &lt;parameter name=&quot;level1&quot; value=&quot;sand&quot;/&gt;
                &lt;parameter name=&quot;level2&quot; value=&quot;planks&quot;/&gt;
                &lt;parameter name=&quot;level3&quot; value=&quot;stone&quot;/&gt;
                &lt;parameter name=&quot;level4&quot; value=&quot;obsidian&quot;/&gt;
            &lt;/conversion&gt;
        &lt;/conversions&gt;
    &lt;/binding&gt;
&lt;/linking&gt;
</code></pre>
<p>In the <code>&lt;linking&gt;</code> tag it can be set how a program element should be displayed in the world. The <code>source</code> must be an existing type of the input CDF, while the <code>target</code> specifies the building type to which the source will be linked to. The valid building types are the following: <code>ground</code>, <code>garden</code>, <code>floor</code>, <code>cellar</code>.</p>
<p>The bindings are used to tell the mapping component which properties of the source element to bind to which attribute of the target object. The table below shows the currently supported attributes.</p>
<table>
<thead>
<tr>
<th>attribute</th>
<th style="text-align: center;">type</th>
<th style="text-align: center;">targets</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>width</td>
<td style="text-align: center;">integer</td>
<td style="text-align: center;">floor, cellar</td>
<td>size near X</td>
</tr>
<tr>
<td>height</td>
<td style="text-align: center;">integer</td>
<td style="text-align: center;">floor, cellar</td>
<td>size near Y</td>
</tr>
<tr>
<td>length</td>
<td style="text-align: center;">integer</td>
<td style="text-align: center;">floor, cellar</td>
<td>size near Z</td>
</tr>
<tr>
<td>character*</td>
<td style="text-align: center;">string</td>
<td style="text-align: center;">floor, cellar</td>
<td>primary material the structure is made of</td>
</tr>
<tr>
<td>external_character*</td>
<td style="text-align: center;">string</td>
<td style="text-align: center;">floor, cellar</td>
<td>secondary material the structure is made of</td>
</tr>
<tr>
<td>torches</td>
<td style="text-align: center;">integer (0 to 5)</td>
<td style="text-align: center;">floor, cellar</td>
<td>quantity of torches, bigger value means smaller spaces between torches</td>
</tr>
<tr>
<td>flower-ratio</td>
<td style="text-align: center;">float (0 to 1)</td>
<td style="text-align: center;">garden</td>
<td>quantity of flowers</td>
</tr>
<tr>
<td>tree-ratio</td>
<td style="text-align: center;">float (0 to 1)</td>
<td style="text-align: center;">garden</td>
<td>quantity of trees</td>
</tr>
<tr>
<td>mushroom-ratio</td>
<td style="text-align: center;">float (0 to 1)</td>
<td style="text-align: center;">garden</td>
<td>quantity of mushrooms</td>
</tr>
</tbody>
</table>
<p><strong>*supported values:</strong> stone, cobblestone, mossy_stone, sandstone, obsidian, wood, dark_wood, birch_wood, planks, dark_planks, metal, dirt, sand, red_sand, brick, stone_brick, dark_brick, glass, gold, diamond</p>
<p>Sometimes a source value doesn't fit the world element we use as target. In this case, we use conversions. At the moment, the following conversions are available:</p>
<ul>
<li><code>to int</code></li>
<li><code>quantization</code></li>
<li><code>normalize</code></li>
<li><code>switch</code></li>
</ul>
<p>The next example show a quantization conversion.</p>
<pre><code class="language-xml">&lt;conversion type=&quot;quantization&quot;&gt;
    &lt;parameter name=&quot;level0&quot; value=&quot;1&quot;/&gt;
    &lt;parameter name=&quot;level1&quot; value=&quot;2&quot;/&gt;
&lt;/conversion&gt;
</code></pre>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.e1c3ead8.min.js"></script>
      
    
  </body>
</html>